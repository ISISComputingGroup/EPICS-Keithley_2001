record(waveform, "$(P)ERROR:RAW"){
    field(DESC, "Gets the error string")
    field(DTYP, "stream")
    field(INP, "@keithley_2001.proto get_errors $(PORT)")
    field(NELM, "2")
    field(FTVL, "STRING")
    
    field(SIML, "$(P)SIM")
    field(SIOL, "$(P)SIM:ERROR:RAW")
    field(SDIS, "$(P)DISABLE")
}

record(stringin, "$(P)ERROR:MSG"){
    field(DESC, "Records the error message")
    field(INP, "$(P)ERROR:RAW.VAL[1] CP")
    field(EGU, "")
    
    info(INTEREST, "LOW")
	info(ARCHIVE, "VAL")
}

record(longin, "$(P)ERROR:CODE"){
    field(DESC, "Records the error code")
    field(INP, "$(P)ERROR:RAW.VAL[0] CP")
    field(EGU, "")
    
    info(INTEREST, "LOW")
	info(ARCHIVE, "VAL")
}

record(bo, "$(P)ERROR:CLEAR"){
    field(DESC, "Records the error string")
    field(DTYP, "stream")
    field(OUT, "@keithley_2001.proto clear_errors $(PORT)")
    
    field(SIML, "$(P)SIM")
    field(SIOL, "$(P)SIM:ERROR:CLEAR")
    field(SDIS, "$(P)DISABLE")
}

record(bi, "$(P)ERROR:CLEAR:FLAG"){
    field(DESC, "Set if we need to clear the error")
}

## SIM Records

record(waveform, "$(P)SIM:ERROR:RAW") {
    field(DESC, "Error Raw SIM record")
    field(NELM, "2")
    field(FTVL, "STRING")
}

record(bo, "$(P)SIM:ERROR:CLEAR") {}
