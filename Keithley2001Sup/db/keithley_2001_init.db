record(stringout, "$(P)ELEMENTS:SP"){
    field(DESC, "Sets the elements of a reading.")
    field(DTYP, "stream")
    field(VAL, "READ, CHAN, UNIT")
    field(OUT, "@keithley_2001.proto set_elements $(PORT)")
    field(FLNK, "$(P)ELEMENTS")
    
    field(SIML, "$(P)SIM")
    field(SIOL, "$(P)SIM:ELEMENTS:SP")
    field(SDIS, "$(P)DISABLE")
}

record(stringin, "$(P)ELEMENTS"){
    field(DESC, "Elements in a reading from device.")
    field(DTYP, "stream")
    field(INP, "@keithley_2001.proto get_elements $(PORT)")
    
    field(SIML, "$(P)SIM")
    field(SIOL, "$(P)SIM:ELEMENTS")
    field(SDIS, "$(P)DISABLE")
}

record(mbbi, "$(P)BUFF:SOURCE") {
    field(DESC, "Reads buffer readings source")
    field(DTYP, "stream")
    
    field(INP, "@keithley_2001.proto get_source $(PORT)")
    
    field(ZRVL, "0")
    field(ZRST, "NONE")
    field(ONVL, "1")
    field(ONST, "SENS1")
    field(TWVL, "2")
    field(TWST, "CALC1")
    
    field(SIML, "$(P)SIM")
    field(SIOL, "$(P)SIM:BUFF:SOURCE")
    field(SDIS, "$(P)DISABLE")
}

record(mbbo, "$(P)BUFF:SOURCE:SP") {
    field(DESC, "Sets buffer readings source")
    field(DTYP, "stream")
    
    field(OUT, "@keithley_2001.proto set_source $(PORT)")
    
    field(ZRVL, "0")
    field(ZRST, "NONE")
    field(ONVL, "1")
    field(ONST, "SENS1")
    field(TWVL, "2")
    field(TWST, "CALC1")
    
    field(SIML, "$(P)SIM")
    field(SIOL, "$(P)SIM:BUFF:SOURCE:SP")
    field(SDIS, "$(P)DISABLE")
}

record(bo, "$(P)BUFF:EGROUP:SP") {
    field(DESC, "Sets the buffer element group")
    field(DTYP, "stream")
    field(ZNAM, "FULL")
    field(ONAM, "COMP")
    field(OUT, "@keithley_2001.proto set_egroup $(PORT)")
    
   field(SIML, "$(P)SIM")
    field(SIOL, "$(P)SIM:BUFF:EGROUP:SP")
    field(SDIS, "$(P)DISABLE")
}

record(bi, "$(P)BUFF:EGROUP") {
    field(DESC, "Gets the buffer element group")
    field(DTYP, "stream")
    field(ZNAM, "FULL")
    field(ONAM, "COMP")    
    field(INP, "@keithley_2001.proto get_egroup $(PORT)")
    
    field(SIML, "$(P)SIM")
    field(SIOL, "$(P)SIM:BUFF:EGROUP")
    field(SDIS, "$(P)DISABLE")
}

record(bo, "$(P)INIT:CONT_MODE:SP") {
    field(DESC, "Sets continuous initialization mode")
    field(DTYP, "stream")
    field(ZNAM, "OFF")
    field(ONAM, "ON")
    
    field(OUT, "@keithley_2001.proto set_init_cont $(PORT)")
    field(SIML, "$(P)SIM")
    field(SIOL, "$(P)SIM:SCAN:CONT_MODE:SP")
    field(SDIS, "$(P)DISABLE")
}

record(bi, "$(P)INIT:CONT_MODE") {
    field(DESC, "Gets continuous initialization mode")
    field(DTYP, "stream")
    field(ZNAM, "OFF")
    field(ONAM, "ON")
    
    field(INP, "@keithley_2001.proto get_init_cont $(PORT)")
    field(SIML, "$(P)SIM")
    field(SIOL, "$(P)SIM:SCAN:CONT_MODE")
    field(SDIS, "$(P)DISABLE")
}

record(longin, "$(P)STAT:MEAS"){
    field(DESC, "Read measurement status register")
    field(DTYP, "stream")
    field(INP, "@keithley_2001.proto get_meas_register_status $(PORT)")
    
    field(SIML, "$(P)SIM")
    field(SIOL, "$(P)SIM:STAT:MEAS")
    field(SDIS, "$(P)DISABLE")
}

record(longout, "$(P)STAT:BUFF:FULL:SP"){
    field(DESC, "Sets status of buffer full status bit on")
    field(DTYP, "stream")
    field(VAL, "512")
    field(OUT, "@keithley_2001.proto set_buff_full_stat $(PORT)")
    
    field(SIML, "$(P)SIM")
    field(SIOL, "$(P)SIM:STAT:BUFF:FULL:SP")
    field(SDIS, "$(P)DISABLE")
}

record(longin, "$(P)STAT:SERVICE_REQEST"){
    field(DESC, "Reads status of service request register")
    field(DTYP, "stream")
    field(INP, "@keithley_2001.proto get_service_request_status $(PORT)")

    field(SIML, "$(P)SIM")
    field(SIOL, "$(P)SIM:STAT:SERVICE_REQEST")
    field(SDIS, "$(P)DISABLE")
}

record(longout, "$(P)STAT:MEAS:SUMM:SP"){
    field(DESC, "Sets measure summary register bit")
    field(VAL, "1")
    field(DTYP, "stream")
    field(OUT, "@keithley_2001.proto set_measure_summary $(PORT)")

    field(SIML, "$(P)SIM")
    field(SIOL, "$(P)SIM:STAT:MEAS:SUMM:SP")
    field(SDIS, "$(P)DISABLE")
}

record(bo, "$(P)RESET") {
    field(DESC, "Resets the device.")
    field(DTYP, "stream")
    field(OUT, "@keithley_2001.proto reset $(PORT)")
    field(SIML, "$(P)SIM")
    field(SIOL, "$(P)SIM:RESET")
    field(SDIS, "$(P)DISABLE")
}

record(bi, "$(P)SIM:RESET"){}

record(bo, "$(P)STAT:RESET"){
    field(DESC, "Resets and clears status registers")
    field(DTYP, "stream")
    field(OUT, "@keithley_2001.proto reset_status_registers $(PORT)")
    
    field(SIML, "$(P)SIM")
    field(SIOL, "$(P)SIM:STAT:RESET")
    field(SDIS, "$(P)DISABLE")
}

record(longout, "$(P)SCAN:COUNT:SP") {
    field(DESC, "Sets the scan count.")
    field(DTYP, "stream")

    field(OUT, "@keithley_2001.proto set_scan_count $(PORT)")
    
    field(SIML, "$(P)SIM")
    field(SIOL, "$(P)SIM:SCAN:COUNT:SP")
    field(SDIS, "$(P)DISABLE")
}

record(longin, "$(P)SCAN:COUNT") {
    field(DESC, "Gets the scan count.")
    field(DTYP, "stream")

    field(INP, "@keithley_2001.proto get_scan_count $(PORT)")
    
    field(SIML, "$(P)SIM")
    field(SIOL, "$(P)SIM:SCAN:COUNT")
    field(SDIS, "$(P)DISABLE")
}

record(mbbi, "$(P)SCAN:TRIG:SOURCE") {
    field(DESC, "Scan trigger mode")
    field(DTYP, "stream")
    field(INP,  "@keithley_2001.proto get_scan_trgiger $(PORT)")

    field(ZRVL, "0")
    field(ZRST, "IMM")
    field(ONVL, "1")
    field(ONST, "HOLD")
    field(TWVL, "2")
    field(TWST, "MAN")
    field(THVL, "3")
    field(THST, "BUS")
    field(FRVL, "4")
    field(FRST, "TLIN")
    field(FVVL, "5")
    field(FVST, "EXT")
    field(SXVL, "6")
    field(SXST, "TIM")
}


# SIM RECORDS

record(bi, "$(P)SIM:STAT:RESET")

record(mbbi, "$(P)SIM:BUFF:SOURCE") {
    field(ZRVL, "0")
    field(ZRST, "NONE")
    field(ONVL, "1")
    field(ONST, "SENS1")
    field(TWVL, "2")
    field(TWST, "CALC1")
}

alias("$(P)SIM:BUFF:SOURCE","$(P)SSIM:BUFF:SOURCE:SP")

record(stringout, "$(P)SIM:ELEMENTS") {}



alias("$(P)SIM:ELEMENTS","$(P)SIM:ELEMENTS:SP")

record(longin, "$(P)SIM:STAT:SERVICE_REQEST") {}

alias("$(P)SIM:STAT:SERVICE_REQEST", "$(P)SIM:STAT:MEAS:SUMM:SP")

record(longin, "$(P)SIM:STAT:MEAS") {}

alias("$(P)SIM:STAT:MEAS", "$(P)SIM:STAT:BUFF:FULL:SP")

record(bi, "$(P)SIM:SCAN:CONT_MODE") {}

alias("$(P)SIM:SCAN:CONT_MODE","$(P)SIM:SCAN:CONT_MODE:SP")

record(bi, "$(P)SIM:BUFF:EGROUP") {}

alias("$(P)SIM:BUFF:EGROUP","$(P)SIM:BUFF:EGROUP:SP")

record(longin, "$(P)SIM:SCAN:COUNT") {}

alias("$(P)SIM:SCAN:COUNT","$(P)SIM:SCAN:COUNT:SP")
