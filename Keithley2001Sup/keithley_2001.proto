# Protocol file for Keithley 2001

InTerminator  = LF;
OutTerminiator = "";

get_IDN {
    out "*IDN?";	
    #Read no more that 39 chars (EPICS limit)
    in "%*{KEITHLEY INSTRUMENTS INC.,}%/(.{0,39})/";
}

reset {
    out "*RST";
}

clear_buffer {
    out ":DATA:CLE";
}

set_elements {
    out ":FORM:ELEM %s";
}

get_elements {
    out ":FORM:ELEM?";
    in "%39c";
}

get_source {
    out ":DATA:FEED?";
    in "%{NONE|SENS1|CALC1}";
}

set_source {
    out ":DATA:FEED %{NONE|SENS1|CALC1}";
}

set_control_mode {
    out ":DATA:FEED:CONT %{NEV|NEXT|ALW|PRET}";
}

get_control_mode {
    out ":DATA:FEED:CONT?";
    in "%{NEV|NEXT|ALW|PRET}";
}

set_buff_size {
    out ":DATA:POIN %d";
}

get_buff_size {
    out ":DATA:POIN?"; 
    in "%d";
}

get_egroup {
    out ":DATA:EGR?";
    in "%{FULL|COMP}";
}

set_egroup {
    out ":DATA:EGR %{FULL|COMP}";
}

set_init_cont{
    out ":INIT:CONT %{OFF|ON}";
}

get_init_cont{
    out ":INIT:CONT?";
    in "%{OFF|ON}";
}

set_single_channel {
    out ":ROUT:CLOS (@%s)";
}

read_single_channel {
    out ":ABOR;:FETC?";
    in "%39c";
}
